<div class="d-flex" id="wrapper">
    
    <div class="bg-dark text-white border-end" style="min-width: 260px; min-height: 100vh;">
        
        <div class="sidebar-heading p-4 border-bottom border-secondary bg-black">
            <h4 class="m-0 text-warning fw-bold">
                <i class="bi bi-tree-fill me-2"></i>MORRISON GREEN FOREST E.I.R.L.
            </h4>
            <div class="mt-3">
                <small class="text-white-50 d-block">
                    <i class="bi bi-person-circle me-1"></i>
                    {{ nombreUsuario }}
                </small>
                <span class="badge mt-1" [ngClass]="isGerente ? 'bg-danger' : 'bg-info'">
                    {{ isGerente ? 'Gerente' : 'Empleado' }}
                </span>
            </div>
        </div>

        <div class="list-group list-group-flush pt-2">
            
            <small class="text-uppercase text-white-50 fw-bold px-3 mt-3 mb-1" style="font-size: 0.75rem;">
                Principal
            </small>
            
            <a routerLink="/dashboard" routerLinkActive="active-nav" 
               class="list-group-item list-group-item-action bg-transparent text-white p-3 border-0 sidebar-link">
                <i class="bi bi-speedometer2 me-3"></i> Dashboard
            </a>

            <small class="text-uppercase text-white-50 fw-bold px-3 mt-3 mb-1" style="font-size: 0.75rem;">
                Operaciones
            </small>

            <a routerLink="/compras" routerLinkActive="active-nav" 
               class="list-group-item list-group-item-action bg-transparent text-white p-3 border-0 sidebar-link">
                <i class="bi bi-cart4 me-3"></i> Compras / Gastos
            </a>

            <a routerLink="/proveedores" routerLinkActive="active-nav" 
               class="list-group-item list-group-item-action bg-transparent text-white p-3 border-0 sidebar-link">
                <i class="bi bi-person-vcard me-3"></i> Proveedores
            </a>
            
            <a routerLink="/packing" routerLinkActive="active-nav" 
               class="list-group-item list-group-item-action bg-transparent text-white p-3 border-0 sidebar-link">
                <i class="bi bi-box-seam me-3"></i> Producción / Packing
            </a>

            <a routerLink="/inventario" routerLinkActive="active-nav" 
               class="list-group-item list-group-item-action bg-transparent text-white p-3 border-0 sidebar-link">
                <i class="bi bi-clipboard-data me-3"></i> Inventario / Kardex
            </a>
            
            <a routerLink="/clientes" routerLinkActive="active-nav" 
               class="list-group-item list-group-item-action bg-transparent text-white p-3 border-0 sidebar-link">
                <i class="bi bi-people me-3"></i> Clientes
            </a>
            
            <a routerLink="/facturacion" routerLinkActive="active-nav" 
               class="list-group-item list-group-item-action bg-transparent text-white p-3 border-0 sidebar-link">
                <i class="bi bi-receipt me-3"></i> Facturación
            </a>

            <a routerLink="/transportistas" routerLinkActive="active-nav" 
               class="list-group-item list-group-item-action bg-transparent text-white p-3 border-0 sidebar-link">
                <i class="bi bi-truck-front me-3"></i> Transportistas
            </a>

            <a routerLink="/fletes" routerLinkActive="active-nav" 
               class="list-group-item list-group-item-action bg-transparent text-white p-3 border-0 sidebar-link">
                <i class="bi bi-truck me-3"></i> Fletes
            </a>

            <div *ngIf="isGerente">
                <small class="text-uppercase text-white-50 fw-bold px-3 mt-3 mb-1" style="font-size: 0.75rem;">
                    Administración
                </small>
                
                <a routerLink="/usuarios" routerLinkActive="active-nav" 
                   class="list-group-item list-group-item-action bg-transparent text-white p-3 border-0 sidebar-link">
                    <i class="bi bi-person-gear me-3"></i> Usuarios
                    <span class="badge bg-danger ms-2" style="font-size: 0.6rem;">Admin</span>
                </a>
            </div>

            <div class="mt-auto p-3">
                <button (click)="logout()" 
                        class="btn btn-outline-danger w-100 d-flex align-items-center justify-content-center text-white border-danger logout-btn">
                    <i class="bi bi-box-arrow-left me-2"></i> Cerrar Sesión
                </button>
            </div>
        </div>
    </div>

    <div id="page-content-wrapper" class="w-100 bg-light">
        
        <nav class="navbar navbar-light bg-white border-bottom shadow-sm px-4 py-3">
            <span class="navbar-text fw-bold text-secondary">
               Bienvenido al Sistema
            </span>
            <div class="ms-auto d-flex align-items-center gap-3">
                <span class="text-muted small text-end">
                    <span class="d-block fw-bold">{{ nombreUsuario }}</span>
                    <span class="badge bg-secondary">{{ isGerente ? 'Gerencia' : 'Personal' }}</span>
                </span>
                <i class="bi bi-person-circle fs-3 text-secondary"></i>
            </div>
        </nav>

        <div class="container-fluid p-4">
            <router-outlet></router-outlet>
        </div>
    </div>
</div>

<style>
    /* Efecto al pasar el mouse por cualquier enlace */
    .sidebar-link {
        transition: all 0.3s ease;
        border-left: 5px solid transparent; /* Borde invisible inicial */
    }
    
    .sidebar-link:hover {
        background-color: rgba(255, 255, 255, 0.1) !important;
        padding-left: 1.5rem !important; /* Desplazamiento sutil a la derecha */
    }

    /* ESTILO DE LA PESTAÑA ACTIVA */
    .active-nav {
        /* Fondo Azul Intenso */
        background-color: #0d6efd !important; 
        
        /* Texto Blanco y Negrita */
        color: #ffffff !important;
        font-weight: bold;
        
        /* Borde Izquierdo Amarillo (Marca DSSL) */
        border-left: 5px solid #ffc107 !important;
        
        /* Sombra suave */
        box-shadow: 0 4px 6px rgba(0,0,0,0.3);
    }

    /* El ícono de la pestaña activa se vuelve amarillo */
    .active-nav i {
        color: #ffc107 !important;
    }

    /* Botón de Cerrar Sesión */
    .logout-btn:hover {
        background-color: #dc3545 !important;
        border-color: #dc3545 !important;
    }
</style>